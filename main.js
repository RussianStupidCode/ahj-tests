(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var s=t.g.document;if(!e&&s&&(s.currentScript&&(e=s.currentScript.src),!e)){var i=s.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();class e{static get activeClass(){return"card-active"}static get notActiveClass(){return"card-notactive"}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.el=document.createElement("div"),this.el.classList.add("card","card-notactive","m-2"),this.el.dataset.ps=t,this.deactivate();const s=document.createElement("img");s.src=e,this.el.insertAdjacentElement("beforeEnd",s)}get paymentSystem(){return this.el.dataset.ps}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}get isActive(){return this.active}activate(){this.el.classList.remove(e.notActiveClass),this.el.classList.add(e.activeClass),this.active=!0}deactivate(){this.el.classList.add(e.notActiveClass),this.el.classList.remove(e.activeClass),this.active=!1}}const s=t.p+"545145c60c726b397f61.png",i=t.p+"6a25e7202ab5838cc1f6.png",n=t.p+"23a3dfa76c9c691ff89c.png",a=t.p+"6d2f90884d339a3dc42a.png",c=t.p+"5ca1f088ecdd58e47981.png",r=t.p+"dde5b0a44a37a5ef0adb.png";class l{constructor(t){this.el=document.createElement("button"),this.el.type="button",this.el.classList.add("btn","btn-success","p-2","btn-lg"),this.el.textContent=t,this.listeners=[],this.active=!1,this.deactivate(),this.el.addEventListener("click",this.click.bind(this))}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}click(){this.el.classList.contains(l.notActiveClass)||this.listeners.forEach((t=>t.call(null)))}addClickListener(t){this.listeners.push(t)}get isDisabled(){return this.el.getAttribute("diabled")}get isActive(){return this.active}activate(){this.el.removeAttribute("disabled"),this.active=!0}deactivate(){this.el.setAttribute("disabled",""),this.active=!1}}class o{constructor(){this.el=document.createElement("input"),this.el.classList.add("form-control","m-1"),this.el.type="text",this.inputListeners=[],this.el.addEventListener("input",(t=>{this.input(t)}))}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}setInputListener(t){this.inputListeners.push(t)}input(t){t.preventDefault(),this.inputListeners.forEach((t=>t.call(null)))}get value(){return this.el.value}dispatchEvent(t){this.el.dispatchEvent(t)}set value(t){this.el.value=t}}const d="MIR",h="American Express",u="VISA",p="Maestro",v="Mastercard",b="China UnionPay",m="Discover",f="JCB International",g="Diners Club",E={[d]:t=>16===t,[u]:t=>16===t||13===t,[p]:t=>t>=12&&t<=19,[b]:t=>16===t,[f]:t=>15===t||16===t,[m]:t=>16===t,[g]:t=>14===t,[v]:t=>16===t,[h]:t=>15===t},C={2:d,30:g,36:g,38:g,31:f,35:f,34:h,37:h,4:u,50:p,56:p,57:p,58:p,51:v,52:v,53:v,54:v,55:v,63:p,67:p,60:m,62:b};function A(t){return t.replace(/\D/g,"")}class L{static createCardsContainer(t){const e=document.createElement("div");return e.classList.add("d-flex","flex-row","y-2"),t.forEach((t=>{t.bindToDOM(e)})),e}static createInputContainer(t,e){const s=document.createElement("div");return s.classList.add("d-flex","flex-row","y-2"),t.bindToDOM(s),e.bindToDOM(s),s}constructor(t){this.cards=new Map(t.map((t=>[t.paymentSystem,t]))),this.el=document.createElement("div"),this.el.classList.add("card-form","d-flex","flex-column","border","border-primary","p-1"),this.button=new l("Submit"),this.input=new o,this.cardsContainer=L.createCardsContainer(this.cards),this.inputContainer=L.createInputContainer(this.input,this.button),this.el.insertAdjacentElement("beforeEnd",this.cardsContainer),this.el.insertAdjacentElement("beforeEnd",this.inputContainer),this.setListeners()}setListeners(){this.input.setInputListener((()=>{const t=this.input.value,e=function(t){const e=A(t),s=`${e[0]}${e[1]}`;return C[s]||C[e[0]]}(t);if(!e)return this.button.deactivate(),void this.activateCard();this.activateCard(e);const s=A(t);(function(t){const e=A(t).split("").map(Number);let s=e[e.length-1];const i=(e.length-2)%2;for(const[t,n]of e.slice(0,-1).entries()){let e=n;t%2===i&&(e*=2),e>9&&(e-=9),s+=e}return s%10==0})(t)&&E[e](s.length)?this.button.activate():this.button.deactivate()})),this.button.addClickListener((()=>{console.log("success")}))}activateCard(t){this.cards.forEach((e=>{e.paymentSystem!==t?e.deactivate():e.activate()}))}getCard(t){return this.cards(t)}getActiveCard(){for(const[,t]of this.cards)if(t.isActive)return t}get isCorrectInput(){return this.button.isActive}bindToDOM(t){t.insertAdjacentElement("beforeEnd",this.el)}}!function(t){const l=[new e(d,i),new e(u,s),new e(h,n),new e(p,a),new e(v,c),new e(m,r)];new L(l).bindToDOM(t)}(document.querySelector(".root"))})();